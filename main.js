(()=>{"use strict";const e=()=>{localStorage.setItem("array",JSON.stringify(r.projectsArray))};function t(e){return{title:e,todo:[]}}class n{constructor(e,t,n,r,a){this.title=e,this.date=t,this.description=n,this.done=r,this.priority=a}toggleDone(){this.done=!this.done}togglePriority(){("Normal"===this.priority||"Important"===this.priority)&&this.priority}}var r=function(){let e=[];return e.push(t("default")),{projectsArray:e}}(),a=JSON.parse(localStorage.getItem("array"));a&&(r.projectsArray=a),function(){document.addEventListener("DOMContentLoaded",(e=>{r.projectsArray.forEach((e=>{"default"===e.title&&(console.log(e),T(e.todo))}))}));var a=new Date,l=String(a.getDate()).padStart(2,"0"),o=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear();a=o+"/"+l+"/"+i;let d=document.getElementById("todolistHolder"),c=document.querySelector("body"),m=document.getElementById("for-select"),u=document.querySelector(".form"),s=document.querySelector(".TEXT");const p=document.querySelector(".paraText");function E(e){m.innerHTML="",e.forEach((e=>{let t=document.createElement("OPTION");t.setAttribute("value",`${e.title}`),t.innerText=e.title,m.append(t),t.setAttribute("id",m.length-1),T(e.todo)}))}function T(t){e(),d.innerHTML="",t.forEach((e=>{let t=document.createElement("DIV");t.classList.add("innerdiv");let n=document.createElement("DIV");n.setAttribute("id","namedate");let r=document.createElement("SPAN");r.innerText=e.title;let a=document.createElement("INPUT");a.setAttribute("id","date"),a.setAttribute("value",e.date),a.setAttribute("type","date"),a.setAttribute("readonly",!0),n.append(r,a);let l=document.createElement("DIV");l.setAttribute("id","paraeditdone");let o=document.createElement("P");o.innerText=e.description;let i=document.createElement("BUTTON"),c=document.createElement("BUTTON"),m=document.createElement("BUTTON");i.setAttribute("id","edit"),i.innerText="Edit",c.setAttribute("id","done"),c.innerText="Not Done Yet",m.setAttribute("id","Xtodo"),m.innerText="X",l.append(o,i,c,m),t.append(n,l),d.append(t);let u=document.getElementsByClassName("innerdiv").length-1;t.setAttribute("id",u),1==e.done?t.style.background="#CDCDCD":"Normal"==e.priority?t.style.background="#a1cae2":"Important"==e.priority&&(t.style.background="#91091e")})),e()}E(r.projectsArray),m.addEventListener("change",(e=>{r.projectsArray.forEach((e=>{e.title==m.value&&T(e.todo)}))})),c.addEventListener("click",(l=>{let o=l.target.parentElement.parentElement;if("Xtodo"===l.target.id&&(l.target.parentElement.parentElement.parentElement.removeChild(o),r.projectsArray.forEach((e=>{m.value==e.title&&(e.todo.splice(o.id,1),T(e.todo))}))),"X"==l.target.className)s.value="",u.style.display="none";else if("edit"==l.target.id)!function(e){let t=e.target.parentElement.parentElement.id,n=document.createElement("DIV");n.classList.add("todoform");let l=document.createElement("LABEL");l.innerText="Title";let o=document.createElement("INPUT");o.setAttribute("maxlength","25"),o.setAttribute("type","text");let i=document.createElement("LABEL");i.innerText="DATE";let d=document.createElement("INPUT");d.setAttribute("type","date"),d.setAttribute("min",a),document.createElement("LABEL").innerText="Priority";let u=document.createElement("LABEL");u.innerText="Description";let s=document.createElement("TEXTAREA");s.setAttribute("maxlength","150");let p=document.createElement("LABEL");p.innerText="Priority";let E=document.createElement("SELECT"),g=document.createElement("OPTION");g.value="Normal",g.innerText="Normal";let v=document.createElement("OPTION");v.value="Important",v.innerText="Important",E.append(g,v);let y=document.createElement("DIV"),A=document.createElement("button");A.innerText="Save",A.setAttribute("id","save");let x=document.createElement("P");x.classList.add("paratext2"),A.addEventListener("click",(e=>{console.log(o.value.length,d.value.length,s.value.length),r.projectsArray.forEach((e=>{var r=0==E.selectedIndex?"Normal":"Important";m.value===e.title&&(o.value.length&&d.value.length&&s.value.length?(e.todo[t].title=o.value,e.todo[t].date=d.value,e.todo[t].description=s.value,e.todo[t].priority=r,console.log(e.todo[t]),T(e.todo),c.removeChild(n)):x.innerText="Please Fill All Information")}))}));let h=document.createElement("button");h.innerText="Cancel",y.append(A,h),h.addEventListener("click",(e=>{c.removeChild(n)})),n.append(l,o,i,d,u,s,p,E,y,x),c.append(n)}(l),e();else if("ADD"==l.target.className){let e=!1;for(let t=0;t<r.projectsArray.length;t++)if(r.projectsArray[t].title==s.value){e=!0;break}if(e||0==s.value||s.value.length>25)if(s.value.length>25)p.innerText="Please Enter a Name Less than 25 Letters",setTimeout((()=>{p.innerText=""}),2e3);else{var i=0==s.value==1?"Please Enter Something ":"Please Choose a Different Project Name";p.innerText=i,setTimeout((()=>{p.innerText=""}),1500)}else{var d=t(s.value);r.projectsArray.push(d),E(r.projectsArray),u.style.display="none",m.value=s.value}}else if("addproject"===l.target.id)u.style.display="flex";else if("addtodo"===l.target.id)!function(){let e=document.createElement("DIV");e.classList.add("todoform");let t=document.createElement("LABEL");t.innerText="Title";let l=document.createElement("INPUT");l.setAttribute("maxlength","25"),l.setAttribute("type","text");let o=document.createElement("LABEL");o.innerText="DATE";let i=document.createElement("INPUT");i.setAttribute("type","date"),i.setAttribute("min",a),document.createElement("LABEL").innerText="Priority";let d=document.createElement("LABEL");d.innerText="Description";let u=document.createElement("TEXTAREA");u.setAttribute("maxlength","150");let s=document.createElement("LABEL");s.innerText="Priority";let p=document.createElement("SELECT"),E=document.createElement("OPTION");E.value="Normal",E.innerText="Normal";let g=document.createElement("OPTION");g.value="Important",g.innerText="Important",p.append(E,g);let v=document.createElement("DIV"),y=document.createElement("button");y.innerText="Save",y.setAttribute("id","save");let A=document.createElement("P");A.classList.add("paratext2"),y.addEventListener("click",(e=>{r.projectsArray.forEach((e=>{if(e.title==m.value)if(l.value.length&&i.value.length&&u.value.length){var t=new n(l.value,i.value,u.value,!1,p.value);e.todo.push(t),T(e.todo)}else A.innerText="Please Enter All Information"}))}));let x=document.createElement("button");x.innerText="Cancel",v.append(y,x),x.addEventListener("click",(t=>{c.removeChild(e)})),e.append(t,l,o,i,d,u,s,p,v,A),c.append(e)}();else if("removeproject"===l.target.id){let e=document.getElementById("for-select").selectedIndex;0===e?(p.innerText="Cannot Remove The Default Project",setTimeout((()=>{p.innerText=""}),1500)):(p.innerText=`Succesfully removed project ${r.projectsArray[e].title}`,setTimeout((()=>{p.innerText=""}),1500),r.projectsArray.splice(e,1),E(r.projectsArray))}else if("done"==l.target.id){let t=o.id;r.projectsArray.forEach((n=>{if(m.value==n.title)if("Not Done Yet"===l.target.innerText)n.todo[t].done=!0,o.style.background="#CDCDCD",l.target.innerText="Done",l.target.style.background="grey",e();else if("Done"===l.target.innerText){n.todo[t].done=!1;var r="Important"==n.todo[t].priority?"#91091e":"#a1cae2";l.target.innerText="Not Done Yet",l.target.style.background="#4a47a3",o.style.background=r,e()}}))}}))}(),JSON.parse(localStorage.getItem("current"))})();
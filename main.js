(()=>{"use strict";const e=()=>{localStorage.setItem("array",JSON.stringify(r.projectsArray))};function t(e){return{title:e,todo:[]}}class n{constructor(e,t,n,r,a){this.title=e,this.date=t,this.description=n,this.done=r,this.priority=a}toggleDone(){this.done=!this.done}togglePriority(){("Normal"===this.priority||"Important"===this.priority)&&this.priority}}var r=function(){let e=[];return e.push(t("default")),{projectsArray:e}}(),a=JSON.parse(localStorage.getItem("array"));a&&(r.projectsArray=a),function(){document.addEventListener("DOMContentLoaded",(e=>{r.projectsArray.forEach((e=>{"default"===e.title&&(console.log(e),T(e.todo))}))}));var a=new Date,o=String(a.getDate()).padStart(2,"0"),l=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear();a=l+"/"+o+"/"+i;let d=document.getElementById("todolistHolder"),c=document.querySelector("body"),m=document.getElementById("for-select"),s=document.querySelector(".form"),u=document.querySelector(".TEXT");const p=document.querySelector(".paraText");function E(e){m.innerHTML="",e.forEach((e=>{let t=document.createElement("OPTION");t.setAttribute("value",`${e.title}`),t.innerText=e.title,m.append(t),t.setAttribute("id",m.length-1),T(e.todo)}))}function T(t){e(),d.innerHTML="",t.forEach((e=>{let t=document.createElement("DIV");t.classList.add("innerdiv");let n=document.createElement("DIV");n.setAttribute("id","namedate");let r=document.createElement("SPAN");r.innerText=e.title;let a=document.createElement("INPUT");a.setAttribute("id","date"),a.setAttribute("value",e.date),a.setAttribute("type","date"),a.setAttribute("readonly",!0),n.append(r,a);let o=document.createElement("DIV");o.setAttribute("id","paraeditdone");let l=document.createElement("P");l.innerText=e.description;let i=document.createElement("BUTTON"),c=document.createElement("BUTTON"),m=document.createElement("BUTTON");i.setAttribute("id","edit"),i.innerText="Edit",c.setAttribute("id","done"),c.innerText="Not Done Yet",m.setAttribute("id","Xtodo"),m.innerText="X",o.append(l,i,c,m),t.append(n,o),d.append(t);let s=document.getElementsByClassName("innerdiv").length-1;t.setAttribute("id",s),1==e.done?t.style.background="#CDCDCD":"Normal"==e.priority?t.style.background="#a1cae2":"Important"==e.priority&&(t.style.background="#91091e")})),e()}E(r.projectsArray),m.addEventListener("change",(e=>{r.projectsArray.forEach((e=>{e.title==m.value&&T(e.todo)}))})),c.addEventListener("click",(o=>{let l=o.target.parentElement.parentElement;if("Xtodo"===o.target.id&&(o.target.parentElement.parentElement.parentElement.removeChild(l),r.projectsArray.forEach((e=>{m.value==e.title&&(e.todo.splice(l.id,1),T(e.todo))}))),"X"==o.target.className)u.value="",s.style.display="none";else if("edit"==o.target.id)!function(e){let t=e.target.parentElement.parentElement.id,n=document.createElement("DIV");n.classList.add("todoform");let o=document.createElement("LABEL");o.innerText="Title";let l=document.createElement("INPUT");l.setAttribute("type","text");let i=document.createElement("LABEL");i.innerText="DATE";let d=document.createElement("INPUT");d.setAttribute("type","date"),d.setAttribute("min",a),document.createElement("LABEL").innerText="Priority";let s=document.createElement("LABEL");s.innerText="Description";let u=document.createElement("TEXTAREA");u.setAttribute("maxlength","150");let p=document.createElement("LABEL");p.innerText="Priority";let E=document.createElement("SELECT"),y=document.createElement("OPTION");y.value="Normal",y.innerText="Normal";let v=document.createElement("OPTION");v.value="Important",v.innerText="Important",E.append(y,v);let g=document.createElement("DIV"),A=document.createElement("button");A.innerText="Save",A.setAttribute("id","save");let x=document.createElement("P");x.classList.add("paratext2"),A.addEventListener("click",(e=>{r.projectsArray.forEach((e=>{var r=0==E.selectedIndex?"Normal":"Important";m.value===e.title&&(l.value.length>1&&d.value.length>1&&u.value>1?(e.todo[t].title=l.value,e.todo[t].date=d.value,e.todo[t].description=u.value,e.todo[t].priority=r,console.log(e.todo[t]),T(e.todo),c.removeChild(n)):x.innerText="Please Fill All Information")}))}));let h=document.createElement("button");h.innerText="Cancel",g.append(A,h),h.addEventListener("click",(e=>{c.removeChild(n)})),n.append(o,l,i,d,s,u,p,E,g,x),c.append(n)}(o),e();else if("ADD"==o.target.className){let e=!1;for(let t=0;t<r.projectsArray.length;t++)if(r.projectsArray[t].title==u.value){e=!0;break}if(e||0==u.value||u.value.length>25)if(u.value.length>25)p.innerText="Please Enter a Name Less than 25 Letters",setTimeout((()=>{p.innerText=""}),2e3);else{var i=0==u.value==1?"Please Enter Something ":"Please Choose a Different Project Name";p.innerText=i,setTimeout((()=>{p.innerText=""}),1500)}else{var d=t(u.value);r.projectsArray.push(d),E(r.projectsArray),s.style.display="none",m.value=u.value}}else if("addproject"===o.target.id)s.style.display="flex";else if("addtodo"===o.target.id)!function(){let e=document.createElement("DIV");e.classList.add("todoform");let t=document.createElement("LABEL");t.innerText="Title";let o=document.createElement("INPUT");o.setAttribute("type","text");let l=document.createElement("LABEL");l.innerText="DATE";let i=document.createElement("INPUT");i.setAttribute("type","date"),i.setAttribute("min",a),document.createElement("LABEL").innerText="Priority";let d=document.createElement("LABEL");d.innerText="Description";let s=document.createElement("TEXTAREA");s.setAttribute("maxlength","150");let u=document.createElement("LABEL");u.innerText="Priority";let p=document.createElement("SELECT"),E=document.createElement("OPTION");E.value="Normal",E.innerText="Normal";let y=document.createElement("OPTION");y.value="Important",y.innerText="Important",p.append(E,y);let v=document.createElement("DIV"),g=document.createElement("button");g.innerText="Save",g.setAttribute("id","save");let A=document.createElement("P");A.classList.add("paratext2"),g.addEventListener("click",(t=>{r.projectsArray.forEach((t=>{t.title==m.value&&(o.value.length>1&&i.value.length>1&&s.value>1?(t.todo.push(new n(o.value,i.value,s.value,!1,p.value)),c.removeChild(e),T(t.todo)):o.value.length>25?(A.innerText="Please Enter a Name Less than 25 Letters",setTimeout((()=>{A.innerText=""}),2e3)):A.innerText="Please Enter All Information")}))}));let x=document.createElement("button");x.innerText="Cancel",v.append(g,x),x.addEventListener("click",(t=>{c.removeChild(e)})),e.append(t,o,l,i,d,s,u,p,v,A),c.append(e)}();else if("removeproject"===o.target.id){let e=document.getElementById("for-select").selectedIndex;0===e?(p.innerText="Cannot Remove The Default Project",setTimeout((()=>{p.innerText=""}),1500)):(p.innerText=`Succesfully removed project ${r.projectsArray[e].title}`,setTimeout((()=>{p.innerText=""}),1500),r.projectsArray.splice(e,1),E(r.projectsArray))}else if("done"==o.target.id){let t=l.id;r.projectsArray.forEach((n=>{if(m.value==n.title)if("Not Done Yet"===o.target.innerText)n.todo[t].done=!0,l.style.background="#CDCDCD",o.target.innerText="Done",o.target.style.background="grey",e();else if("Done"===o.target.innerText){n.todo[t].done=!1;var r="Important"==n.todo[t].priority?"#91091e":"#a1cae2";o.target.innerText="Not Done Yet",o.target.style.background="#4a47a3",l.style.background=r,e()}}))}}))}(),JSON.parse(localStorage.getItem("current"))})();
(()=>{"use strict";function e(e){return{title:e,todo:[]}}class t{constructor(e,t,n,r,o){this.title=e,this.date=t,this.description=n,this.done=r,this.priority=o}toggleDone(){this.done=!this.done}togglePriority(){("Normal"===this.priority||"Important"===this.priority)&&this.priority}}var n=function(){let t=[];return t.push(e("default")),{projectsArray:t}}();!function(){var r=new Date,o=String(r.getDate()).padStart(2,"0"),a=String(r.getMonth()+1).padStart(2,"0"),l=r.getFullYear();r=a+"/"+o+"/"+l;let i=document.getElementById("todolistHolder"),d=document.querySelector("body"),c=document.getElementById("for-select"),s=document.querySelector(".form"),u=document.getElementById("addproject"),m=document.querySelector(".TEXT");function p(e){c.innerHTML="",e.forEach((e=>{let t=document.createElement("OPTION");t.setAttribute("value",`${e.title}`),t.innerText=e.title,c.append(t),t.setAttribute("id",c.length-1)}))}function E(e){i.innerHTML="",e.forEach((e=>{let t=document.createElement("DIV");t.classList.add("innerdiv");let n=document.createElement("DIV");n.setAttribute("id","namedate");let r=document.createElement("SPAN");r.innerText=e.title;let o=document.createElement("INPUT");o.setAttribute("id","date"),o.setAttribute("value",e.date),o.setAttribute("type","date"),o.setAttribute("readonly",!0),n.append(r,o);let a=document.createElement("DIV");a.setAttribute("id","paraeditdone");let l=document.createElement("P");l.innerText=e.description;let d=document.createElement("BUTTON"),c=document.createElement("BUTTON"),s=document.createElement("BUTTON");d.setAttribute("id","edit"),d.innerText="Edit",c.setAttribute("id","done"),c.innerText="Not Done Yet",!0===e.done&&(innerDiv.style.background="#CDCDCD",c.innerText="Done",c.style.background="grey"),s.setAttribute("id","Xtodo"),s.innerText="X",a.append(l,d,c,s),t.append(n,a),i.append(t);let u=document.getElementsByClassName("innerdiv").length-1;t.setAttribute("id",u),"Normal"==e.priority?t.style.background="#a1cae2":"Important"==e.priority&&(t.style.background="#91091e")}))}p(n.projectsArray),u.addEventListener("click",(e=>{s.style.display="flex"})),s.addEventListener("click",(t=>{if("X"==t.target.className)m.value="",s.style.display="none";else if("ADD"==t.target.className){var r=e(m.value);n.projectsArray.push(r),p(n.projectsArray),s.style.display="none",c.value=m.value}})),c.addEventListener("change",(e=>{n.projectsArray.forEach((e=>{e.title==c.value&&E(e.todo)}))})),d.addEventListener("click",(e=>{let o=e.target.parentElement.parentElement;if("Xtodo"===e.target.id)e.target.parentElement.parentElement.parentElement.removeChild(o),n.projectsArray.forEach((e=>{c.value==e.title&&e.todo.splice(o.id,1)}));else if("edit"===e.target.id)changeTodoInformation(e),n.projectsArray.forEach((e=>{console.log(e.todo),E(e.todo)}));else if("addtodo"===e.target.id)!function(){let e=document.createElement("DIV");e.classList.add("todoform");let o=document.createElement("LABEL");o.innerText="Title";let a=document.createElement("INPUT");a.setAttribute("type","text");let l=document.createElement("LABEL");l.innerText="DATE";let i=document.createElement("INPUT");i.setAttribute("type","date"),i.setAttribute("min",r),document.createElement("LABEL").innerText="Priority";let s=document.createElement("LABEL");s.innerText="Description";let u=document.createElement("TEXTAREA");u.setAttribute("maxlength","150");let m=document.createElement("LABEL");m.innerText="Priority";let p=document.createElement("SELECT"),g=document.createElement("OPTION");g.value="Normal",g.innerText="Normal";let y=document.createElement("OPTION");y.value="Important",y.innerText="Important",p.append(g,y);let T=document.createElement("DIV"),A=document.createElement("button");A.innerText="Save",A.setAttribute("id","save"),A.addEventListener("click",(r=>{n.projectsArray.forEach((n=>{n.title==c.value&&(n.todo.push(new t(a.value,i.value,u.value,!1,p.value)),d.removeChild(e),E(n.todo))}))}));let v=document.createElement("button");v.innerText="Cancel",T.append(A,v),v.addEventListener("click",(t=>{d.removeChild(e)})),e.append(o,a,l,i,s,u,m,p,T),d.append(e)}();else if("removeproject"===e.target.id){const e=document.createElement("P");d.append(e);let t=document.getElementsByTagName("option");for(let r=0;r<t.length;r++)n.projectsArray.forEach((o=>{o.title===t[r].value&&("default"===o.title?(e.innerText="You Can't Remove The Default Project",e.classList.toggle("paraText"),setTimeout((()=>{e.innerText=""}),2e3)):(n.projectsArray.splice(t[r].id,1),p(n.projectsArray),e.innerText=`Succesfully Deleted The Project ${o.title}`,e.classList.add("paraText"),setTimeout((()=>{e.innerText=""}),2e3)))}))}else if("done"==e.target.id){let t="#a1cae2"===o.style.background?"#a1cae2":"#91091e",r=o.id;n.projectsArray.forEach((n=>{!1===n.todo[r].done?(o.style.background="#CDCDCD",e.target.innerText="Done",e.target.style.background="grey",n.todo[r].toggleDone()):!0===n.todo[r].done&&(e.target.innerText="Not Done Yet",e.target.style.background="#4a47a3",o.style.background=t,n.todo[r].toggleDone())}))}}))}()})();
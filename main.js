(()=>{"use strict";const e=()=>{localStorage.setItem("array",JSON.stringify(r.projectsArray))};function t(e){return{title:e,todo:[]}}class n{constructor(e,t,n,r,a){this.title=e,this.date=t,this.description=n,this.done=r,this.priority=a}toggleDone(){this.done=!this.done}togglePriority(){("Normal"===this.priority||"Important"===this.priority)&&this.priority}}var r=function(){let e=[];return e.push(t("default")),{projectsArray:e}}(),a=JSON.parse(localStorage.getItem("array"));a&&(r.projectsArray=a),function(){document.addEventListener("DOMContentLoaded",(e=>{r.projectsArray.forEach((e=>{"default"===e.title&&(T(e.todo),console.log("something"))}))}));var a=new Date,o=String(a.getDate()).padStart(2,"0"),l=String(a.getMonth()+1).padStart(2,"0"),i=a.getFullYear();a=l+"/"+o+"/"+i;let d=document.getElementById("todolistHolder"),c=document.querySelector("body"),s=document.getElementById("for-select"),m=document.querySelector(".form"),u=document.querySelector(".TEXT");const p=document.createElement("P");function E(e){s.innerHTML="",e.forEach((e=>{let t=document.createElement("OPTION");t.setAttribute("value",`${e.title}`),t.innerText=e.title,s.append(t),t.setAttribute("id",s.length-1),T(e.todo)}))}function T(t){e(),d.innerHTML="",t.forEach((e=>{let t=document.createElement("DIV");t.classList.add("innerdiv");let n=document.createElement("DIV");n.setAttribute("id","namedate");let r=document.createElement("SPAN");r.innerText=e.title;let a=document.createElement("INPUT");a.setAttribute("id","date"),a.setAttribute("value",e.date),a.setAttribute("type","date"),a.setAttribute("readonly",!0),n.append(r,a);let o=document.createElement("DIV");o.setAttribute("id","paraeditdone");let l=document.createElement("P");l.innerText=e.description;let i=document.createElement("BUTTON"),c=document.createElement("BUTTON"),s=document.createElement("BUTTON");i.setAttribute("id","edit"),i.innerText="Edit",c.setAttribute("id","done"),c.innerText="Not Done Yet",s.setAttribute("id","Xtodo"),s.innerText="X",o.append(l,i,c,s),t.append(n,o),d.append(t);let m=document.getElementsByClassName("innerdiv").length-1;t.setAttribute("id",m),1==e.done?t.style.background="#CDCDCD":"Normal"==e.priority?t.style.background="#a1cae2":"Important"==e.priority&&(t.style.background="#91091e")})),e()}p.classList.add("paraText"),c.append(p),E(r.projectsArray),s.addEventListener("change",(e=>{r.projectsArray.forEach((e=>{e.title==s.value&&T(e.todo)}))})),c.addEventListener("click",(e=>{let o=e.target.parentElement.parentElement;if("Xtodo"===e.target.id&&(e.target.parentElement.parentElement.parentElement.removeChild(o),r.projectsArray.forEach((e=>{s.value==e.title&&e.todo.splice(o.id,1)}))),"X"==e.target.className)u.value="",m.style.display="none";else if("edit"==e.target.id)!function(e){let t=e.target.parentElement.parentElement.id,n=document.createElement("DIV");n.classList.add("todoform");let o=document.createElement("LABEL");o.innerText="Title";let l=document.createElement("INPUT");l.setAttribute("type","text");let i=document.createElement("LABEL");i.innerText="DATE";let d=document.createElement("INPUT");d.setAttribute("type","date"),d.setAttribute("min",a),document.createElement("LABEL").innerText="Priority";let m=document.createElement("LABEL");m.innerText="Description";let u=document.createElement("TEXTAREA");u.setAttribute("maxlength","150");let E=document.createElement("LABEL");E.innerText="Priority";let g=document.createElement("SELECT"),y=document.createElement("OPTION");y.value="Normal",y.innerText="Normal";let v=document.createElement("OPTION");v.value="Important",v.innerText="Important",g.append(y,v);let A=document.createElement("DIV"),x=document.createElement("button");x.innerText="Save",x.setAttribute("id","save"),x.addEventListener("click",(e=>{r.projectsArray.forEach((e=>{var r=0==g.selectedIndex?"Normal":"Important";console.log(r,g.selectedIndex),s.value===e.title&&(l.value&&d.value&&u.value?(e.todo[t].title=l.value,e.todo[t].date=d.value,e.todo[t].description=u.value,e.todo[t].priority=r,console.log(e.todo[t]),T(e.todo),c.removeChild(n)):(p.innerText="Please Fill All Information",setTimeout((()=>{p.innerText=""}),2e3)))}))}));let h=document.createElement("button");h.innerText="Cancel",A.append(x,h),h.addEventListener("click",(e=>{c.removeChild(n)})),n.append(o,l,i,d,m,u,E,g,A),c.append(n)}(e);else if("ADD"==e.target.className){let e=!1;for(let t=0;t<r.projectsArray.length;t++)if(r.projectsArray[t].title==u.value){e=!0;break}if(e||0==u.value||u.value.length>25)if(u.value.length>25)p.innerText="Please Enter a Name Less than 25 Letters",setTimeout((()=>{p.innerText=""}),2e3);else{var l=0==u.value==1?"Please Enter Something ":"Please Choose a Different Project Name";p.innerText=l,setTimeout((()=>{p.innerText=""}),1500)}else{var i=t(u.value);r.projectsArray.push(i),E(r.projectsArray),m.style.display="none",s.value=u.value}}else if("addproject"===e.target.id)m.style.display="flex";else if("addtodo"===e.target.id)!function(){let e=document.createElement("DIV");e.classList.add("todoform");let t=document.createElement("LABEL");t.innerText="Title";let o=document.createElement("INPUT");o.setAttribute("type","text");let l=document.createElement("LABEL");l.innerText="DATE";let i=document.createElement("INPUT");i.setAttribute("type","date"),i.setAttribute("min",a),document.createElement("LABEL").innerText="Priority";let d=document.createElement("LABEL");d.innerText="Description";let m=document.createElement("TEXTAREA");m.setAttribute("maxlength","150");let E=document.createElement("LABEL");E.innerText="Priority";let g=document.createElement("SELECT"),y=document.createElement("OPTION");y.value="Normal",y.innerText="Normal";let v=document.createElement("OPTION");v.value="Important",v.innerText="Important",g.append(y,v);let A=document.createElement("DIV"),x=document.createElement("button");x.innerText="Save",x.setAttribute("id","save"),x.addEventListener("click",(t=>{r.projectsArray.forEach((t=>{t.title==s.value&&(o.value.length>25?(p.innerText="Please Enter a Name Less than 25 Letters",setTimeout((()=>{p.innerText=""}),2e3)):(t.todo.push(new n(o.value,i.value,m.value,!1,g.value)),c.removeChild(e),T(t.todo)),console.log(p.innerText),console.log(u.value.length),console.log(o.value.length))}))}));let h=document.createElement("button");h.innerText="Cancel",A.append(x,h),h.addEventListener("click",(t=>{c.removeChild(e)})),e.append(t,o,l,i,d,m,E,g,A),c.append(e)}();else if("removeproject"===e.target.id){let e=document.getElementById("for-select").selectedIndex;0===e?(p.innerText="Cannot Remove The Default Project",setTimeout((()=>{p.innerText=""}),1500)):(p.innerText=`Succesfully removed project ${r.projectsArray[e].title}`,setTimeout((()=>{p.innerText=""}),1500),r.projectsArray.splice(e,1),E(r.projectsArray))}else if("done"==e.target.id){let t=o.id;r.projectsArray.forEach((n=>{if(s.value==n.title)if("Not Done Yet"===e.target.innerText)n.todo[t].done=!0,o.style.background="#CDCDCD",e.target.innerText="Done",e.target.style.background="grey";else if("Done"===e.target.innerText){n.todo[t].done=!1;var r="Important"==n.todo[t].priority?"#91091e":"#a1cae2";e.target.innerText="Not Done Yet",e.target.style.background="#4a47a3",o.style.background=r}}))}}))}(),JSON.parse(localStorage.getItem("current"))})();